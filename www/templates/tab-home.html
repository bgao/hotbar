<ion-view title="HOME">
  <ion-nav-buttons side="right">
    <button class="button-icon icon ion-ios7-camera light"
            ng-click="captureImage()"></button>
    <button class="button-icon icon ion-ios7-videocam light"
            ng-click="captureVideo()"></button>
    <!-- <a class="button button-icon icon ion-ios7-photos" href=""
         ng-click="getImage()"></a> -->
  </ion-nav-buttons>
  <!-- <div class="bar bar-subheader">
    <div class="button-bar">
      <button class="button button-icon icon ion-ios7-camera"
              ng-click="captureImage()"></button>
      <button class="button button-icon icon ion-ios7-videocam"></button>
      <button class="button button-icon icon ion-ios7-photos"
              ng-click="getImage()"></button>
    </div>
  </div> -->
  <ion-content has-header="true" padding="false">
    <ion-scroll class="cover">
      <a class="full-image" href="" ng-click="changeCover()">
        <img src="img/coverpicture.jpg">
      </a>
    </ion-scroll>
    <!-- <div class="card">
      <div class="item">
        <input type="file"
               onchange="angular.element(this).scope().filesChanged(this)"
               multiple />
        <button ng-click="uploadImage()">Upload</button>
      </div>
      <li ng-repeat="file in files">{{file.name}}</li>
    </div> -->
    <div class="list" ng-show="media">
      <div class="item item-body">
        <video class="full-image" ng-show="media.type!='image/jpeg'"
               onclick="this.play()" controls>
          <source src="{{media.data}}">
          Your browser does not support the video tag.
        </video>
        <img class="full-image" ng-src="{{media.data}}"
             ng-show="media.type=='image/jpeg'">
      </div>
      <div class="item item-input-inset">
        <label class="item-input-wrapper">
          <input type="text" placeholder="Add Description" ng-model="media.description">
        </label>
        <button class="button button-small icon ion-checkmark-round"
                ng-click="uploadMedia()">
                <!-- ng-disabled="!media.hotbar" --> 
        </button>
        <button class="button button-small icon ion-close-round"
                ng-click="cleanup()">
        </button>
      </div>
    </div>
    <div class="list" ng-show="media == null">
      <a ng-repeat="post in posts"
         ng-href="#/tab/home/{{post.id}}"
         class="item item-avatar thumb-right">
        <img src="{{post.user.picture}}">
        <h2>{{post.media.description}}</h2>
        <p>{{post.user.displayName}} @ {{post.hotbar.name}}</p>
        <p>{{post.createdAt | prettyDate}}</p>
        <img ng-src="{{post.media.type === 'image/jpeg' ? post.media.url : 'img/genericvideoicon.jpg'}}">
      </a>
    </div>
  </ion-content>
</ion-view>
